<Window x:Class="Minecraft_Server_Maker.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Minecraft_Server_Maker"
        mc:Ignorable="d"
        Title="[MSM.NET]"
        Width="620" Height="800"
        WindowStartupLocation="CenterScreen"
        Background="#0f0f0f"
        Foreground="Azure"
        FontFamily="Segoe UI Variable Display, Segoe UI, sans-serif">

    <Window.Resources>
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#252525" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="Padding" Value="15,8" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="#333" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="BtnBorder" Background="{TemplateBinding Background}" CornerRadius="8" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="BtnBorder" Property="Background" Value="#333"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Background" Value="#1A1A1A" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderBrush" Value="#333" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="12,6" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border" CornerRadius="6" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                            <ScrollViewer x:Name="PART_ContentHost" Focusable="false" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernCheckBox" TargetType="CheckBox">
            <Setter Property="Foreground" Value="#BBB"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <StackPanel Orientation="Horizontal" Margin="0,8">
                            <Grid Width="34" Height="18">
                                <Border x:Name="Bg" Background="#252525" CornerRadius="9" BorderBrush="#333" BorderThickness="1"/>
                                <Border x:Name="Dot" HorizontalAlignment="Left" Width="10" Height="10" Background="#888" CornerRadius="5" Margin="4,0"/>
                            </Grid>
                            <ContentPresenter Margin="12,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Bg" Property="Background" Value="#0078D4"/>
                                <Setter TargetName="Dot" Property="HorizontalAlignment" Value="Right"/>
                                <Setter TargetName="Dot" Property="Background" Value="White"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="Slider">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid>
                            <Border Height="4" Background="#252525" CornerRadius="2" VerticalAlignment="Center" Margin="5,0"/>
                            <Track x:Name="PART_Track">
                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="Thumb">
                                                <Ellipse Width="16" Height="16" Fill="#0078D4" Stroke="#0f0f0f" StrokeThickness="1"/>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="TabControl">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabControl">
                        <Grid>
                            <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/></Grid.RowDefinitions>
                            <TabPanel Grid.Row="0" IsItemsHost="True" Background="Transparent"/>
                            <ContentPresenter Grid.Row="1" ContentSource="SelectedContent" />
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="TabItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border x:Name="Border" Margin="0,0,4,0" Padding="25,12" CornerRadius="8,8,0,0" Background="#1A1A1A" BorderBrush="#333" BorderThickness="1,1,1,0">
                            <ContentPresenter ContentSource="Header" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#0078D4"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="False">
                                <Setter Property="Foreground" Value="#888"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernBadge" TargetType="Border">
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="10,3"/>
            <Setter Property="Background" Value="#151515"/>
            <Setter Property="BorderBrush" Value="#333"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </Window.Resources>

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="M S M . N E T" FontSize="10" FontWeight="Bold" Foreground="#0078D4" Margin="0,0,0,5" />
            <TextBlock Text="Minecraft Server Maker" FontSize="32" FontWeight="SemiBold" Foreground="White" />
        </StackPanel>

        <TabControl Grid.Row="1">
            <TabItem Header="INFO">
                <StackPanel Margin="0,20,0,0">
                    <Border Background="#1A1A1A" CornerRadius="12" Padding="20" BorderBrush="#333" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="SERVER MONITOR" FontSize="11" FontWeight="Bold" Foreground="#555" Margin="0,0,0,15"/>
                            
                            <Grid Margin="0,0,0,10">
                                <TextBlock Text="Current State:" FontSize="13" Foreground="#888"/><TextBlock Text="{Binding Status}" HorizontalAlignment="Right" FontSize="13" FontWeight="Bold" Foreground="#4CAF50" />
                            </Grid>
                            <Grid Margin="0,0,0,10">
                                <TextBlock Text="Local IP Address:" FontSize="13" Foreground="#888"/><TextBlock Text="{Binding LocalIp}" Foreground="#0078D4" HorizontalAlignment="Right" FontSize="13" FontWeight="Medium" />
                            </Grid>
                            <Grid Margin="0,0,0,15">
                                <TextBlock Text="Public IP Address:" FontSize="13" Foreground="#888"/><TextBlock Text="{Binding PublicIp}" Foreground="#0078D4" HorizontalAlignment="Right" FontSize="13" FontWeight="Medium" />
                            </Grid>
                            
                            <Separator Background="#252525" Margin="-20,10,-20,20"/>

                            <Grid Margin="0,0,0,15">
                                <TextBlock Text="Server Name:" VerticalAlignment="Center" Foreground="#888"/>
                                <TextBlock Text="{Binding Config.ServerName}" HorizontalAlignment="Right" Foreground="White" FontSize="16" FontWeight="Bold" MaxWidth="250" TextTrimming="CharacterEllipsis"/>
                            </Grid>

                            <Grid Margin="0,0,0,12">
                                <TextBlock Text="Connection Mode:" VerticalAlignment="Center" Foreground="#888"/>
                                <Border Style="{StaticResource ModernBadge}" HorizontalAlignment="Right">
                                    <TextBlock FontWeight="Bold" FontSize="11">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Config.IsLocalStatus}" Value="False">
                                                        <Setter Property="Text" Value="PUBLIC"/><Setter Property="Foreground" Value="#0078D4"/></DataTrigger>
                                                    <DataTrigger Binding="{Binding Config.IsLocalStatus}" Value="True">
                                                        <Setter Property="Text" Value="LOCALHOST"/><Setter Property="Foreground" Value="#FFA500"/></DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Border>
                            </Grid>

                            <Grid Margin="0,0,0,12">
                                <TextBlock Text="Security Access:" VerticalAlignment="Center" Foreground="#888"/>
                                <Border Style="{StaticResource ModernBadge}" HorizontalAlignment="Right">
                                    <TextBlock FontWeight="Bold" FontSize="11">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Config.IsWhiteListed}" Value="False">
                                                        <Setter Property="Text" Value="WHITELIST OFF"/><Setter Property="Foreground" Value="#F44336"/></DataTrigger>
                                                    <DataTrigger Binding="{Binding Config.IsWhiteListed}" Value="True">
                                                        <Setter Property="Text" Value="WHITELIST ON"/><Setter Property="Foreground" Value="#4CAF50"/></DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Border>
                            </Grid>

                            <Grid Margin="0,0,0,12">
                                <TextBlock Text="Account Mode:" VerticalAlignment="Center" Foreground="#888"/>
                                <Border Style="{StaticResource ModernBadge}" HorizontalAlignment="Right">
                                    <TextBlock FontWeight="Bold" FontSize="11">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Config.IsPremium}" Value="False">
                                                        <Setter Property="Text" Value="NON-PREMIUM"/><Setter Property="Foreground" Value="#888"/></DataTrigger>
                                                    <DataTrigger Binding="{Binding Config.IsPremium}" Value="True">
                                                        <Setter Property="Text" Value="PREMIUM ONLY"/><Setter Property="Foreground" Value="#0078D4"/></DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Border>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </TabItem>

            <TabItem Header="MAKER">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Background="Transparent">
                    <StackPanel Margin="0,20,0,0">
                        <TextBlock Text="Server File Selection (.jar)" Margin="0,0,0,8" Foreground="#BBB" />
                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions><ColumnDefinition Width="*" /><ColumnDefinition Width="Auto" /></Grid.ColumnDefinitions>
                            <TextBox Text="{Binding Config.JarPathDisplay, Mode=OneWay}" IsReadOnly="True" Height="40" Background="#141414"/>
                            <Button Grid.Column="1" Content="Browse" Command="{Binding SelectJarCommand}" Style="{StaticResource ModernButton}" Margin="10,0,0,0" Width="85"/>
                        </Grid>

                        <Border Background="#141414" CornerRadius="10" Padding="15" BorderBrush="#252525" BorderThickness="1" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="MEMORY ALLOCATION" FontSize="10" FontWeight="Bold" Foreground="#555" Margin="0,0,0,12"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,10">
                                    <TextBlock Text="Available:" Foreground="#888" Margin="0,0,10,0"/>
                                    <TextBlock Text="{Binding Config.FreeMemory}" Foreground="#BBB" FontWeight="SemiBold"/><TextBlock Text="/" Foreground="#444" Margin="10,0"/>
                                    <TextBlock Text="{Binding Config.TotalMemory}" Foreground="#BBB" FontWeight="SemiBold"/><TextBlock Text="MB" Foreground="#666" Margin="5,0,0,0"/>
                                </StackPanel>
                                <Slider Value="{Binding Config.SetMemory, UpdateSourceTrigger=PropertyChanged}" Minimum="1024" Maximum="{Binding Config.FreeMemory}" TickFrequency="1024" IsSnapToTickEnabled="True" Margin="0,10"/>
                                <TextBlock HorizontalAlignment="Center" Foreground="#0078D4" FontWeight="Bold"><Run Text="Assigned: "/><Run Text="{Binding Config.SetMemory}"/><Run Text=" MB"/></TextBlock>
                            </StackPanel>
                        </Border>

                        <Border Background="#141414" CornerRadius="10" Padding="15" BorderBrush="#252525" BorderThickness="1" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="NETWORK SETTINGS" FontSize="10" FontWeight="Bold" Foreground="#555" Margin="0,0,0,12"/>
                                <Grid Margin="0,0,0,10">
                                    <TextBlock Text="Server Port:" VerticalAlignment="Center" Foreground="#888"/>
                                    <TextBox Text="{Binding Config.ServerPort, UpdateSourceTrigger=PropertyChanged}" Width="100" HorizontalAlignment="Right"/>
                                </Grid>
                                <CheckBox Content="Enable Localhost Only" IsChecked="{Binding Config.IsLocalStatus
                                , UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource ModernCheckBox}" />
                            </StackPanel>
                        </Border>

                        <Border Background="#141414" CornerRadius="10" Padding="15" BorderBrush="#252525" BorderThickness="1">
                            <StackPanel>
                                <TextBlock Text="CONSOLE &amp; LAUNCH" FontSize="10" FontWeight="Bold" Foreground="#555" Margin="0,0,0,10"/>
                                <CheckBox Content="Launch with External Terminal" IsChecked="{Binding UseShellExecute}" Style="{StaticResource ModernCheckBox}" />
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="SERVER">
                <StackPanel Margin="0,20,0,0">
                    <TextBlock Text="Server Display Name" Margin="0,0,0,8" Foreground="#BBB" />
                    <TextBox Text="{Binding Config.ServerName, UpdateSourceTrigger=PropertyChanged}" Height="45" FontSize="15" Margin="0,0,0,20"/>
                    <Border Background="#141414" CornerRadius="10" Padding="20" BorderBrush="#252525" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="SERVER PROPERTIES CONFIG" FontSize="10" FontWeight="Bold" Foreground="#555" Margin="0,0,0,18"/>
                            <CheckBox Content="Enable Server Whitelist" IsChecked="{Binding Config.IsWhiteListed, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource ModernCheckBox}" />
                            <CheckBox Content="Online Mode (Require Premium)" IsChecked="{Binding Config.IsPremium, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource ModernCheckBox}" />
                        </StackPanel>
                    </Border>
                </StackPanel>
            </TabItem>
        </TabControl>

        <Button Grid.Row="2" Content="{Binding ActionButtonText}" Height="60" FontSize="18" FontWeight="Bold" Background="{Binding ActionButtonColor}" Foreground="White" Style="{StaticResource ModernButton}" Command="{Binding CreateServerCommand}" Margin="0,20,0,0">
            <Button.Effect><DropShadowEffect BlurRadius="12" ShadowDepth="0" Color="Black" Opacity="0.4"/></Button.Effect>
        </Button>
    </Grid>
</Window>